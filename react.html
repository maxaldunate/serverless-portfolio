<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Equal and opposite Reactions</title>
    <style media="screen">
    <!-- style for message box and style for error -->
      .MessageBox {
        margin: 1em;
        padding: 2em;
      }

      .error{
        border: 1px solid red;
        background-color: #eeebbb;
      }

      .success{
        border: 1px solid blue;
        background-color: #bbeebb;
      }

      .hidden{
        display: none;
      }

    </style>
  </head>
  <body>
    <main id="content"></main>

    <script src="js/babel-standalone"></script>
    <script src="js/react.min.js"></script>
    <script src="js/react-dom.min.js"></script>

    <script type="text/babel" data-presets="react">
    // ask React to render the content
// two inputs - the div, and the content where you want to render it
// this looks like html in js.. this is jsx (java script extensions)

// component should start with a capital letter
class NameInput extends React.Component {
  // intialise in a constructor that gets called when the the component is created.
  constructor(props) {
    super(props);

    this.state = {
      message: {
        // because no value, it will default to hidden
        type: undefined,
        body: undefined
      }
    }
    // bind button click in the constructor, so that it has access to object
    // do this every time we need an event handler
    this.buttonClicked = this.buttonClicked.bind(this);
  }

  // render is usually best at the bottom, so put button event here
  buttonClicked (evt) {
    let name = this.refs.nameInput.value;

    this.setState({
      message: {
        // ?  is a ternerary option - if name has a value put success else err
        type: name ? "success" : "error",
        body: name ? "welcome to React, " + name : "Please enter a name."
      }
    });
  }

  // every component needs a render function
  render() {
    let msg = this.state.message;

    return (
      <div>
        <label>Insert Name: <input ref="nameInput" type="text" />
        </label>
        <button onClick={this.buttonClicked}>Click here</button>

        <MessageBox type={msg.type} message={msg.body} />
      </div>
    );
  }
}

class MessageBox extends React.Component {
  render() {
    return (
      // if we get a prop(erty) type then use it, if not hidden is default
      <div className={"messageBox " + (this.props.type || "hidden")}>
        {this.props.message}
      </div>
    );
  }
}
ReactDOM.render(<NameInput />, document.getElementById("content"));
</script>
  </body>
</html>
